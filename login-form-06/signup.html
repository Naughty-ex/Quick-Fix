<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="fonts/icomoon/style.css">
    <link rel="icon" type="image/x-icon" href="/logo.png">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <title>QuicK-Fix</title>
</head>
<body>

<div class="d-lg-flex half">
  <div class="bg order-1 order-md-2" style="background-image: url('https://images.unsplash.com/photo-1611396000732-f8c9a933424f?fm=jpg&w=3000&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNlbGwlMjBwaG9uZSUyMHJlcGFpcnxlbnwwfHwwfHx8MA%3D%3D');"></div>
  <div class="contents order-2 order-md-1">

    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-md-7">
          <div class="mb-4">
            <h3>Sign Up</h3>
            <p class="mb-4">Create your account to get started.</p>
          </div>
          <form action="#" id="myForm" method="post">
            Full Name
            <div class="form-group first">
              <!-- <label for="username">Full Name</label> -->
              <input type="text" class="form-control" id="fullName" placeholder="e.g Muhammad Asad " required>
            </div>
            Email
            <div class="form-group">
              <!-- <label for="email">Email</label> -->
              <input type="email" class="form-control" id="email" placeholder="email@domain.com" >
            </div>
            Password
            <div class="form-group last mb-3">
              <input type="password" class="form-control" id="password" placeholder="Password" required>
              <span class="togglePassword"><i class="fas fa-eye"></i></span>
          </div>
          <div class="form-group last mb-3">
              <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password" required>
              <span class="toggleConfirmPassword"><i class="fas fa-eye"></i></span>
          </div>
              <input type="submit" value="Sign Up" class="btn btn-block btn-primary">
  
              <br>
              <p>Already have an account? <a href="signin.html" class="signin">Sign in here.</a></p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('myForm');
    const inputWrap = document.querySelector(".inputWrap");
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const container = document.querySelector(".container");
    const main = document.querySelector("main");
    const togglePassword = document.querySelector(".togglepwd");

    // Toggle Password visibility
    togglePassword.addEventListener("click", () => {
        if (password.type === "password") {
            password.type = "text";
        } else {
            password.type = "password";
        }
    });

    let errorMessageEmail = document.createElement("p");
    errorMessageEmail.style.cssText = "color:red; font-size:10px; text-align:left;";

    let errorMessagePassword = document.createElement("p");
    errorMessagePassword.style.cssText = "color:red; font-size:10px; text-align:left;";

    let successMessage = document.createElement("div");

    // Email Validation
    email.addEventListener("blur", () => {
        const emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if (!emailRegex.test(email.value)) {
            errorMessageEmail.textContent = "Please enter a valid email address.";
            email.parentNode.insertBefore(errorMessageEmail, email.nextSibling);
        } else {
            errorMessageEmail.remove();
        }
    });

    form.addEventListener('submit', (event) => {
        event.preventDefault();
        let isValid = true;

        // Email validation
        const emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
if (!emailRegex.test(email.value)) {
isValid = false;
if (!errorMessageEmail.parentNode) {
email.parentNode.insertBefore(errorMessageEmail, email.nextSibling);
}
} else {
errorMessageEmail.remove();
}

    // Password length validation
    if (password.value.length < 6) {
        errorMessagePassword.textContent = "Password must be at least 6 characters long.";
        if (!errorMessagePassword.parentNode.contains(errorMessagePassword)) {
password.parentNode.insertBefore(errorMessagePassword, password.nextSibling);
}
isValid = false;
} else {
errorMessagePassword.remove();
}

    if (isValid) {
        // Simulatean API call to log in the user
fetch("https://cadence-connect.onrender.com/api/v1/users/sign-up", {
method: 'POST',
headers: {
'Content-Type': 'application/json'
},
body: JSON.stringify({
email: email.value,
password: password.value
})
})
.then(response => {
if (response.ok) {
return response.json();
} else {
throw new Error('Failed to log in');
}
})
.then(data => {
console.log(data);
successMessage.innerHTML = "Logged In Successfully";
successMessage.style.cssText = "border:1px solid green; height:10vh; width:30%; display:grid; place-items:center; padding:5px; color:green; margin-top: 10px;";
container.insertBefore(successMessage, main);
// Redirect user or update UI as needed
setTimeout(() => {
window.location.replace("../../html and css files/vendorDashboard.html");
}, 1000);
})
.catch(error => {
console.error('Error during Sign In:', error);
let badErrorMessage = document.createElement("p");
badErrorMessage.textContent = "Error during Sign In";
badErrorMessage.style.cssText = "color:red; font-size:10px; height: 8%; text-align:left; margin-top: 10px;";
container.insertBefore(badErrorMessage, main);
setTimeout(() => {
badErrorMessage.remove();
}, 3000);
});
}
});
});






  </script>
  </body>
  </html>
